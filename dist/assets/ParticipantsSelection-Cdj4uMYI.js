import{r,B as m,j as a}from"./index-MFkXzy34.js";import{a as n}from"./axios-Bo0ATomq.js";import{s}from"./index-CWgEG4yM.js";import{S as f}from"./index-B3feB2rc.js";import{T as S}from"./Table-CvbxXJr6.js";import"./index-DvYSdXp_.js";import"./index-B8Q89q-y.js";import"./index-n6iW0Nqt.js";import"./index-BmFh8N38.js";import"./useBreakpoint-BMDcL5YP.js";const $=()=>{const[o,p]=r.useState([]),[c,i]=r.useState(!0);r.useEffect(()=>{const e=sessionStorage.getItem("token");n.get(`${m}getAllUsers`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then(t=>{p(t.data.data.totalParticipants),i(!1)}).catch(t=>{s.error(t),i(!1)})},[]);const d=`${m}approvePendingParticipants/`,l=sessionStorage.getItem("token"),u=async e=>{try{const t=await n.put(d+e,{approvalStatus:"APPROVED",startDate:"2023-08-01",endDate:"2024-02-01"},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});window.alert(t.data.responseMessage),t.status===200?s.success(`Student with ID ${e} has been approved.`):s.error(`Failed to approve student with ID ${e}.`)}catch(t){console.error("Error approving student:",t)}},h=async e=>{try{const t=await n.put(d+e,{approvalStatus:"DISAPPROVED",startDate:"2023-08-01",endDate:"2024-02-01"},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});window.alert(t.data.responseMessage),s.success(`Student with ID ${e} has been disapproved.`),t.status===200?s.success(`Student with ID ${e} has been disapproved.`):s.error(`Failed to disapprove student with ID ${e}.`)}catch(t){console.error("Error disapproving student:",t)}},g=[{title:"S/N",dataIndex:"sn",key:"sn"},{title:"First-Name",dataIndex:"firstName",key:"firstName"},{title:"Last-Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"LGA",dataIndex:"lga",key:"lga"},{title:"DOB",dataIndex:"dob",key:"dob"},{title:"Programme",dataIndex:"programme",key:"programme"},{title:"Action",key:"action",render:e=>a.jsxs("div",{className:" gap-4 flex",children:[a.jsx("button",{className:"bg-blue-700 h-[1.5rem] w-[5rem] text-white font-semibold rounded-md",onClick:()=>u(e.key),children:"Approve"}),a.jsx("button",{className:"bg-red-700 h-[1.5rem] w-[5rem] text-white font-semibold rounded-md",onClick:()=>h(e.key),children:"Disapprove"})]})}],x=o==null?void 0:o.map((e,t)=>({key:e._id,sn:t+1,firstName:e.firstName,lastName:e.lastName,email:e.email,lga:e.lga,dob:e.dob,programme:e.programme}));return a.jsx(f,{spinning:c,children:a.jsx("div",{className:"overflow-x-auto ",children:a.jsx(S,{columns:g,dataSource:x})})})};export{$ as default};
